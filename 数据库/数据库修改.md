
 

设计原则：

​    我知道这个版本的数据库还很不完善，但是本着快速上线，以后优化的原则。只要不出严重的bug，就可以继续使用。

 

   pa_ 开头的代表这里存储的是一个路径

 

表设计：

用户表： user

| 列名                | 类型           | 备注      | 中文名      |
| ----------------- | ------------ | ------- | -------- |
| user_id           | Int          | 主键      | 用户id     |
| password          | VARCHAR(25)  | 不可空     | 密码       |
| nickname          | VARCHAR(12)  |         | 昵称       |
| true_name         | VARCHAR(12)  |         | 真实姓名     |
| gender            | varchar(2)   |         | 性别       |
| ***[email]***       | VARCHAR(45)  | 不可空     | 邮箱       |
| ***[head_url]***    | VARCHAR(200) | 不可空     | 头像路径     |
| ***[bg_url]***      | VARCHAR(200) | 不可空     | 主页背景图片路径 |
| introduce         | VARCHAR(500) |         | 个人简介     |
| ***[regist_date]*** | Timestamp    | 不可空     | 注册日期    |
| ***[is_admin]***    | int          | 用数字表示权限 | 是否为admin |

 

 

用户文章表：article

| 列名                  | 类型          | 备注               | 中文名      |
| ------------------- | ----------- | ---------------- | -------- |
| ***[article_id]***    | int         | 主键               | 文章的ID    |
| user_id             | Int         | 外键（user）         | 文章作者的用户名 |
| ***[article_title]*** | varchar(50) | 不可空              | 文章的标题    |
| create_time         | Timestamp   | 不可空              | 文章创建日期   |
| ***[update_time]***   | Timestamp   | 不可空              | 最近更新时间   |
| ***[article_sum]***   | text(200)   | 不可空              | 200字的简介  |
| type_id             | int         | 外键（article_type） | 类型       |
| ***[views]***         | int         |                  | 浏览量      |
| comments            | int         |                  | 评论数      |
| ***[collections]***   | int         |                  | 收藏数      |
| content_url         | text(300)   | 不可空              | 文章url    |
| title_image_url     | text(300)   |                  | 题图url    |

 (加一个字段：ban，布尔类型，表示是否该文章被封禁)

 

用户文章草稿表：article_draft

| 列名                      | 类型          | 备注       | 中文名           |
| ----------------------- | ----------- | -------- | ------------- |
| ***[article_draft_id]***  | int         | 主键       | 文章的ID         |
| user_id                 | Int         | 外键（user） | 文章作者的用户名      |
| title                   | varchar(50) | 不可空      | 文章的标题         |
| create_time             | Timestamp   | 不可空      | 文章创建日期        |
| ***[update_time]***       | Timestamp   | 不可空      | 最近更新时间        |
| **ar_introduction(删除)** | text(200)   | 不可空      | 200字的简介       |
| content_url             | text(300)   | 不可空      | ***文章内容url*** |
| title_image_url         | text(300)   |          | 题图url         |

 

 

​                            文章的评论：article_comment

| 列名                       | 类型          | 备注               | 中文名      |
| ------------------------ | ----------- | ---------------- | -------- |
| ***[article_comment_id]*** | int         | 主键               | 评论编号     |
| article_id               | int         | 外键(user_article) | 文章的ID    |
| ***[discusser]***            | varchar(25) | 不可空              | 发出评论的用户名 |
| ***[comment]***            | text(500)   | 不可空              | 评论正文500字 |
| ***[create_time]***        | Timestamp   | 不可空              | 评论的创建时间  |

 

 

​                           评论回复表：article_reply

| 列名                       | 类型        | 备注             | 中文名      |
| ------------------------ | --------- | -------------- | -------- |
| ***[article_reply_id]***   | int       | 主键，不可重复        | 回复的编号    |
| ***[article_comment_id]*** | int       | 外键(comment_id) | 评论的编号    |
| ***[replier]***            | int       | 不可空            | 发出回复的用户  |
| ***[user_id]***            | int       | 不可空            | 被回复的用户   |
| re_time                  | Timestamp | 不可空            | 回复时间     |
| ***[reply]***              | text(500) | 不可空            | 回复内容500字 |

 

 

点赞表(取消点赞，该表不再需要)：like

| 列名          | 类型          | 备注         | 中文名      |
| ----------- | ----------- | ---------- | -------- |
| id          | int         | 主键，被描述表的ID | 点赞表的编号   |
| type        | int         | 主键，用数字表示类型 | 点赞目标的类型  |
| username    | varchar(25) | 不可空（外键）    | 发出点赞的用户名 |
| by_username | varchar(25) | 不可空（外键）    | 被点赞的用户名  |
| status      | varchar(25) | 用数字表示点赞状态  | 点赞状态     |

 

 

​                            关注表：attention

| 列名                 | 类型   | 备注      | 中文名          |
| ------------------ | ---- | ------- | ------------ |
| ***[attention_id]*** | int  | 主键      | 关注表的编号       |
| ***[follower]***      | int  | 不可空(外键) | 发出关注的用户名（id） |
| ***[user_id]***     | int  | 不可空(外键) | 被关注的用户名（id）  |

 

增加文章类别表（字段包含类别id，类别名）

​                                  文章类别表：article_type

| 列名        | 类型          | 备注              | 中文名   |
| --------- | ----------- | --------------- | ----- |
| type_id   | int         | 主键(外键（article）) | 文章的主键 |
| type_name | varchar(50) |                 | 类别名   |

 

增加文章收藏表（字段包括文章id，收藏用户的id）

​                                  收藏表：***article_collection***

| 列名         | 类型   | 备注                   | 中文名     |
| ---------- | ---- | -------------------- | ------- |
| article_id | int  | 无主键，使用一对多外键（article） | 文章id    |
| user_id    | int  |                      | 收藏用户的id |

 

增加文章置顶表（字段包含文章id，类别id）

​                                文章置顶表：***article_top***

| 列名                   | 类型        | 备注              | 中文名   |
| -------------------- | --------- | --------------- | ----- |
| ***[article_top_id]*** | int       | 主键              | 置顶表主键 |
| article_id           | int       | 主键（外键（article）） | 文章表主键 |
| top_time             | Timestamp | 用于排序            | 置顶时间  |

 

增加轮播图表（字段包含图片id，轮播图片路径，轮播图次序，图片标题，图片链接）

轮播图：***slideshow***

| 列名                 | 类型           | 备注   | 中文名        |
| ------------------ | ------------ | ---- | ---------- |
| ***[slideshow_id]*** | int          | 主键   | 轮播图表主键     |
| img_url            | varchar(200) | 不可空  | 图片路径       |
| ***[seq]***          | int          | 不可空  | 轮播图次序      |
| img_title          | varchar(20)  | 不可空  | 图片标题       |
| ***[target_url]***   | varchar(100) | 不可空  | ***目的链接*** |

 

增加主页版块表（字段包含版块id，版块图片路径，版块主题，版块链接）

版块：***board***

| 列名              | 类型           | 备注   | 中文名    |
| --------------- | ------------ | ---- | ------ |
| ***[board_id]***  | int          | 主键   | 版块表主键  |
| ***[img_url]***   | varchar(200) | 不可空  | 版块图片路径 |
 | ***[board_url]*** | varchar(100) | 不可空  | 版块链接   |
| ***[seq]***       | int          | 不可空  | 板块次序   |

 

增加二维码表（字段包含二维码id，二维码图片路径，二维码图片次序，二维码图片描述）

二维码：qr_code

| 列名         | 类型           | 备注   | 中文名    |
| ---------- | ------------ | ---- | ------ |
| qr_id      | int          | 主键   | 二维码表主键 |
| qr_img_url | varchar(200) | 不可空  | 二维码路径  |
| ***[seq]***  | int          | 不可空  | 二维码次序  |
| qr_title   | varchar(10)  | 不可空  | 二维码标题  |

 
